if not game:IsLoaded() then
	game.Loaded:Wait()
end
local function msg(msg1)
	game.ReplicatedStorage.DefaultChatSystemChatEvents.SayMessageRequest:FireServer(msg1, 'All')
end

local player = game:service"Players".LocalPlayer
player.Idled:Connect(function()
	game:service"VirtualUser":Button2Down(Vector2.new(0,0),workspace.CurrentCamera.CFrame)
	wait(1)
	game:service"VirtualUser":Button2Up(Vector2.new(0,0),workspace.CurrentCamera.CFrame)
end)
local IsHost = false
if player.UserId == Settings['KnockerID'] then
	IsHost = true
 
	player.Character.HumanoidRootPart.CFrame = CFrame.new(-810, -40, -841)
	wait(0.2)
	player.Character.HumanoidRootPart.Anchored = true
	wait(1)
	msg("Only execute once.")
	wait(1)
	msg("Starting in 5s")
	wait(5)
	msg("Knock Start")
	wait(0.2)
	player.Backpack:FindFirstChild("Combat").Parent = player.Character
	wait(1)

	while wait() do
		player.Character:FindFirstChild("Combat"):Activate()
	end
	setfpscap(Settings['KnockerFPS'])


else

	setfpscap(Settings['AltFPS'])
	game:service"RunService":Set3dRenderingEnabled(false)
	local ScreenGui = Instance.new("ScreenGui")
	local Frame = Instance.new("Frame")
	local TextLabel = Instance.new("TextLabel")
	ScreenGui.Parent = game.CoreGui
	ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
	Frame.Parent = ScreenGui
	Frame.AnchorPoint = Vector2.new(0.5, 0.5)
	Frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
	Frame.BorderColor3 = Color3.fromRGB(0, 0, 0)
	Frame.BorderSizePixel = 100
	Frame.Position = UDim2.new(0.5, 0, 0.5, 0)
	Frame.Size = UDim2.new(1, 0, 1, 0)
	settings().Physics.PhysicsEnvironmentalThrottle = 1
	settings().Rendering.QualityLevel = 'Level01'
	for i,v in pairs(game:GetDescendants()) do
		if v:IsA("Part") then
			v.Material = Enum.Material.Pavement
			v.Transparency = 1
		elseif v:IsA("Decal") then
			v:Destroy()
		elseif v:IsA("Texture") then
			v:Destroy()
		elseif v:IsA("MeshPart") then
			v.TextureID = 0
			v.Transparency = 1
		elseif v.Name == "Terrian" then
			v.WaterReflectace = 1
			v.WaterTransparency = 1
		elseif v:IsA("SpotLight") then
			v.Range = 0
			v.Enabled = false
		elseif v:IsA("WedgePart") then
			v.Transparency = 1
		elseif v:IsA("UnionOperation") then
			v.Transparency = 1
		end
	end
end




local function cmds(msg, plr)
	if IsHost == false then
		local op = game:service"Players":GetPlayerByUserId(plr)
		while wait() do
			pcall(function()
				for i,v in pairs(game.Players:GetChildren()) do
					if workspace:FindFirstChild(v.Name) then
						if v.Name ~= game.Players.LocalPlayer.Name then
							v.Character:Destroy()
						end
					end
				end
				player.Character.HumanoidRootPart.CFrame = op.Character.HumanoidRootPart.CFrame*CFrame.new(0,0,-2)
			end)
		end
		while wait() do

		end
		if op and msg then
			if msg:lower() == "exit" then
				game:Shutdown()




			end
		end
	end
end


game.ReplicatedStorage.DefaultChatSystemChatEvents.OnMessageDoneFiltering.OnClientEvent:Connect(function(messageData) 
	local user = game:service"Players":GetPlayerByUserId(game.Players:GetUserIdFromNameAsync(messageData.FromSpeaker))
	local msg = messageData.Message
	if user.UserId == Settings['KnockerID'] then
		cmds(msg, user.UserId)
	end
end)

